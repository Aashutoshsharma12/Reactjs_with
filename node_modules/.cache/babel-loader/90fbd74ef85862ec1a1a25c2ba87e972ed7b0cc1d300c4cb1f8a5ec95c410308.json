{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./userList.css';// Create a CSS file for styling\nimport axios from'axios';import{useNavigate}from'react-router-dom';import ListUi from'../helper';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UserList(){const[users,setUsers]=useState([]);const navigate=useNavigate();const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPage]=useState(1);const[totalCount,setTotalCount]=useState(0);const[search1,setSearch1]=useState('');const[loading,setLoading]=useState(true);const[error,setError]=useState(null);/**\n     * Fetches the list of users from the API.\n     * \n     * @param {string} search The search query to filter the users.\n     * @param {boolean} searchStatus Whether to set the current page to 1 or not.\n     */const fetchUsers=async(search,searchStatus)=>{try{let url=`${process.env.REACT_APP_BACKEND_BASE_URL}api/v1/admin/user/list?role=user&page=${currentPage}&perPage=10&nameMatched=${search1}`;if(search&&search!==''&&search!==null){setCurrentPage(1);url=`${process.env.REACT_APP_BACKEND_BASE_URL}api/v1/admin/user/list?role=user&page=1&perPage=10&nameMatched=${search}`;}const response=await axios.get(url,{headers:{'Authorization':localStorage.getItem('token'),'Content-Type':'application/json'}});const data=response.data.data;setUsers(data.findUserDetails);// Assuming the API returns an array of users\nsetTotalCount(data.totalDocument);if(data.totalDocument!==0){const total_page=Math.ceil(data.totalDocument/10);setTotalPage(total_page);}setLoading(false);}catch(err){var _err$response,_err$response$data;setError(err.message||\"Failed to fetch users\");setLoading(false);if(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.code)===401){navigate('/login');}}};useEffect(()=>{const search='';fetchUsers(search,false);},[fetchUsers,currentPage]);const handle_changePage=currentPage=>{if(currentPage>0&&currentPage<=totalPages)setCurrentPage(currentPage);};const fetch_users=event=>{event.preventDefault();const search=event.target.value;console.log(search,\"search----------\");if(search&&search!==''&&search!==null){setSearch1(search);setCurrentPage(1);// eslint-disable-next-line react-hooks/exhaustive-deps\nfetchUsers(search,true);}};const view=async userDetails=>{// href = {`/users/view/${user._id}`\nconsole.log(userDetails,\"id-----------------------------------\");// setUser({ name: userDetails.name, phoneNumber: userDetails.phoneNumber, email: userDetails.email, address: userDetails.address })\nnavigate(`/users/view?name=${userDetails.name}&phoneNumber=${userDetails.phoneNumber}&email=${userDetails.email}&address=${userDetails.address}&status=${userDetails.status?'Active':'Inactive'}`);};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"user-list-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User List\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search users...\"// value={searchTerm}\n,onChange:fetch_users,className:\"search-input\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"user-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created At\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/// user.type = 'user',\n_jsx(ListUi.List,{user:user},user._id))})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:totalCount===0?'block':'none'},children:/*#__PURE__*/_jsx(\"h3\",{children:\"NotFound\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",id:\"pagi\",style:{display:totalCount===0||totalCount<=10?'none':'block'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handle_changePage(currentPage-1),disabled:currentPage===1,children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",currentPage,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handle_changePage(currentPage+1),disabled:currentPage===totalPages||totalPages===0,children:\"Next\"})]})]});}export default UserList;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","ListUi","jsx","_jsx","jsxs","_jsxs","UserList","users","setUsers","navigate","currentPage","setCurrentPage","totalPages","setTotalPage","totalCount","setTotalCount","search1","setSearch1","loading","setLoading","error","setError","fetchUsers","search","searchStatus","url","process","env","REACT_APP_BACKEND_BASE_URL","response","get","headers","localStorage","getItem","data","findUserDetails","totalDocument","total_page","Math","ceil","err","_err$response","_err$response$data","message","code","handle_changePage","fetch_users","event","preventDefault","target","value","console","log","view","userDetails","name","phoneNumber","email","address","status","children","style","color","className","type","placeholder","onChange","map","user","List","_id","display","id","onClick","disabled"],"sources":["/home/vinod/Documents/my-react-app/src/user/UserList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './userList.css'; // Create a CSS file for styling\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport ListUi from '../helper'\nfunction UserList() {\n    const [users, setUsers] = useState([]);\n    const navigate = useNavigate()\n    const [currentPage, setCurrentPage] = useState(1);\n    const [totalPages, setTotalPage] = useState(1);\n    const [totalCount, setTotalCount] = useState(0)\n    const [search1, setSearch1] = useState('')\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    /**\n     * Fetches the list of users from the API.\n     * \n     * @param {string} search The search query to filter the users.\n     * @param {boolean} searchStatus Whether to set the current page to 1 or not.\n     */\n    const fetchUsers = async (search, searchStatus) => {\n        try {\n            let url = `${process.env.REACT_APP_BACKEND_BASE_URL}api/v1/admin/user/list?role=user&page=${currentPage}&perPage=10&nameMatched=${search1}`\n            if (search && search !== '' && search !== null) {\n                setCurrentPage(1)\n                url = `${process.env.REACT_APP_BACKEND_BASE_URL}api/v1/admin/user/list?role=user&page=1&perPage=10&nameMatched=${search}`\n            }\n            const response = await axios.get(url, {\n                headers: {\n                    'Authorization': localStorage.getItem('token'),\n                    'Content-Type': 'application/json',\n                }\n            });\n            const data = response.data.data\n            setUsers(data.findUserDetails); // Assuming the API returns an array of users\n            setTotalCount(data.totalDocument);\n            if (data.totalDocument !== 0) {\n                const total_page = Math.ceil(data.totalDocument / 10)\n                setTotalPage(total_page)\n            }\n            setLoading(false);\n        } catch (err) {\n            setError(err.message || \"Failed to fetch users\");\n            setLoading(false);\n            if (err.response?.data?.code === 401) {\n                navigate('/login');\n            }\n        }\n    };\n    useEffect(() => {\n        const search = ''\n        fetchUsers(search, false);\n    }, [fetchUsers, currentPage]);\n    const handle_changePage = (currentPage) => {\n        if (currentPage > 0 && currentPage <= totalPages)\n            setCurrentPage(currentPage)\n    }\n    const fetch_users = (event) => {\n        event.preventDefault();\n        const search = event.target.value\n        console.log(search, \"search----------\")\n        if (search && search !== '' && search !== null) {\n            setSearch1(search);\n            setCurrentPage(1);\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            fetchUsers(search, true);\n        }\n    }\n    const view = async (userDetails) => {\n        // href = {`/users/view/${user._id}`\n        console.log(userDetails, \"id-----------------------------------\")\n        // setUser({ name: userDetails.name, phoneNumber: userDetails.phoneNumber, email: userDetails.email, address: userDetails.address })\n        navigate(`/users/view?name=${userDetails.name}&phoneNumber=${userDetails.phoneNumber}&email=${userDetails.email}&address=${userDetails.address}&status=${userDetails.status ? 'Active' : 'Inactive'}`)\n    }\n    if (loading) return <p>Loading...</p>;\n    if (error) return <p style={{ color: 'red' }}>{error}</p>;\n\n    return (\n        <div className=\"user-list-container\">\n            <h2>User List</h2>\n            <input\n                type=\"text\"\n                placeholder=\"Search users...\"\n                // value={searchTerm}\n                onChange={fetch_users}\n                className=\"search-input\"\n            />\n            <table className=\"user-table\">\n                <thead>\n                    <tr>\n                        <th>Name</th>\n                        <th>Email ID</th>\n                        <th>Phone Number</th>\n                        <th>Address</th>\n                        <th>Created At</th>\n                        <th>Status</th>\n                        <th>Action</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {\n                        users.map(user => (\n                            // user.type = 'user',\n                            < ListUi.List key={user._id} user={user} />\n                        ))\n                    }\n                </tbody>\n            </table>\n            <div style={{ display: totalCount === 0 ? 'block' : 'none' }}>\n                <h3>\n                    NotFound\n                </h3>\n            </div>\n            <div className=\"pagination\" id='pagi' style={{ display: totalCount === 0 || totalCount <= 10 ? 'none' : 'block' }}>\n                <button onClick={() => handle_changePage(currentPage - 1)} disabled={currentPage === 1}>\n                    Previous\n                </button>\n                <span>Page {currentPage} of {totalPages}</span>\n                <button onClick={() => handle_changePage(currentPage + 1)} disabled={currentPage === totalPages || totalPages === 0}>\n                    Next\n                </button>\n            </div>\n        </div >\n    );\n}\n\nexport default UserList; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}